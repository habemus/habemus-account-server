<html>
<head>
  <title></title>
</head>
<body>

  <button onclick="logIn()">log in</button>
  <button onclick="signUp()">sign up</button>
  <button onclick="ensureUser()">ensure user</button>
  <button onclick="ensureVerifiedUser()">ensure verified user</button>
  <button onclick="logOut()">log out</button>
  
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel pellentesque tortor. Sed bibendum ullamcorper nulla a blandit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce commodo justo nec metus lobortis, rutrum cursus neque rutrum. Aliquam quis quam id urna egestas molestie sit amet a purus. Nam auctor erat metus, quis ornare metus fringilla non. Nam diam quam, hendrerit commodo libero ut, lacinia aliquam leo. Nulla a nisl efficitur, bibendum arcu id, bibendum leo. Mauris eget metus imperdiet, luctus erat eget, sodales augue. Etiam porta ullamcorper egestas.
  </p>

  <p>
    Suspendisse consectetur interdum diam non facilisis. Curabitur volutpat et tortor eu congue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec feugiat leo est, non imperdiet tellus tincidunt eget. Aenean eu cursus risus, sed cursus lacus. Proin placerat condimentum ligula at facilisis. Morbi feugiat quam sed ex convallis vehicula. Suspendisse rhoncus aliquam porta. Vestibulum at tempor ipsum, eu tempor sapien. Vestibulum vestibulum pellentesque justo, vitae sodales felis rhoncus nec. Phasellus vestibulum urna et diam cursus congue. Curabitur tristique est ac nulla lacinia efficitur. Sed tellus dui, tempus vitae ligula non, blandit viverra purus.
  </p>

  <p>
    Vestibulum ut mi a nisi pretium pharetra id eu nibh. Quisque varius risus vel sollicitudin blandit. Aenean pretium lacus sodales quam eleifend cursus. Proin lobortis auctor mattis. Vivamus quis tortor leo. Curabitur convallis mattis libero, et efficitur velit tincidunt eu. Sed non sagittis lacus. Curabitur sit amet ullamcorper tellus.
  </p>

  <p>
    Maecenas vulputate luctus neque, non cursus velit dictum sit amet. Sed facilisis quam sit amet metus venenatis euismod. Nam ipsum odio, lacinia quis volutpat ac, tincidunt sit amet metus. Proin euismod vehicula risus, ac tempor tortor pulvinar at. Nullam leo nunc, laoreet vel massa commodo, vestibulum pharetra sapien. Suspendisse ullamcorper eleifend fringilla. Curabitur sed lorem vel diam sodales consequat. Suspendisse gravida vehicula facilisis. Mauris eu mi dignissim, ornare ex vitae, maximus leo. Ut viverra dignissim porttitor. Fusce dictum tempor tincidunt. In in convallis justo, id tincidunt magna.
  </p>

  <p>
    Donec ultricies consequat sapien consequat venenatis. Nam in venenatis neque, ac volutpat mauris. Maecenas erat orci, commodo id sem sed, mattis rhoncus sem. Praesent rhoncus congue leo, eu bibendum est efficitur in. Praesent egestas tortor vitae arcu ornare aliquet in in ante. Vivamus non pharetra leo. Morbi pretium, dolor nec porttitor malesuada, ipsum metus porttitor dui, sed imperdiet massa tortor quis leo. In eleifend lobortis ligula, vel sagittis mauris dictum eu. Nunc nec volutpat nisl, eget tincidunt nibh. Aliquam semper ligula ut tellus maximus molestie. Proin maximus mauris et dolor condimentum tristique. Maecenas mattis elit vitae nulla condimentum varius. Aenean quis eleifend augue, commodo posuere lorem.
  </p>

  <script src="h-account-dialog.js"></script>
  <script>
    var accountDialog = new HAccountDialog({
      serverURI: 'http://localhost:4000',
    });

    accountDialog.on('auth-status-change', function (status) {
      console.log('auth-status-change', status);
    });

    accountDialog.attach(document.body);

    function logIn() {
      accountDialog.logIn()
        .then(function (user) {
          console.log('logged user in ', user);
        })
        .catch(function (err) {
          console.warn('login cancel', err.stack);
        });
    }

    function signUp() {
      accountDialog.signUp()
        .then(function (user) {
          console.log('signUp success', user);
        })
        .catch(function (err) {
          console.warn('signUp error', err.stack)
        });
    }

    function ensureUser() {
      accountDialog.ensureUser()
        .then(function (user) {
          console.log('ensureUser success', user);
        })
        .catch(function (err) {
          console.warn('ensureUser error', err.stack);
        })
    }

    function ensureVerifiedUser() {
      accountDialog.ensureUser({ ensureEmailVerified: true })
        .then(function (user) {
          console.log('ensureVerifiedUser success', user);
        })
        .catch(function (err) {
          console.warn('ensureVerifiedUser error', err.stack);
        })
    }

    function logOut() {
      accountDialog.logOut()
        .then(function () {
          console.log('logOut success');
        })
        .catch(function (err) {
          console.warn('logOut error', err.stack);
        })
    }
  </script>
</body>
</html>